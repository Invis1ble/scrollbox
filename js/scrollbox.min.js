/*!
 * Scrollbox v2.1.6
 * (c) 2013-2016, Max Invis1ble
 * Licensed under MIT (https://opensource.org/licenses/mit-license.php)
 */
+function(a,b,c,d){"use strict";var e="scrollbox",f=function(b,c){!function(c,e,f,g){c.options=e,c.$element=b,c.$rail=a(e.templates.rail),c.$bar=a(e.templates.bar);for(g in f)e[f[g]]&&(c[f[g]]=e[f[g]]);c._isBarCaptured=c._isShown=!1,c._prevY=0,c._isReachTriggered={top:!1,bottom:!1},c._scrollHeight=d,c._setScrolledToY(),c._barTouchId=c._elementTouchId=c._swipeStartY=c._swipeStartedAt=null,c.init()}(this,a.extend({},a.fn[e].defaults,c),["init","addListeners","removeListeners","scroll","jump","update","destroy"])};f.prototype={init:function(){!function(a,b){a.$wrapper=a.$element.trigger("init."+e).css("overflow","hidden").wrap(b.templates.wrapper).parent().append(a.$rail).append(a.$bar),a._updateBarHeight(),"top"!==b.start&&a.jump(b.start),a._isShown&&a.addListeners()}(this,this.options)},addListeners:function(){!function(b,d){b.$wrapper.on("mousewheel",d(b,"_onWheel")),b.$bar.on({mousedown:d(b,"_onBarMouseDown"),touchstart:d(b,"_onBarTouchStart")}),b.$element.on({scroll:d(b,"_onElementScroll"),touchstart:d(b,"_onElementTouchStart")}),a(c).on({mouseup:d(b,"_onDocumentMouseUp"),mousemove:d(b,"_onDocumentMouseMove"),touchend:d(b,"_onDocumentTouchEnd"),touchmove:d(b,"_onDocumentTouchMove")})}(this,a.proxy)},removeListeners:function(){!function(b){b.$wrapper.off("mousewheel",b._onWheel),b.$bar.off({mousedown:b._onBarMouseDown,touchstart:b._onBarTouchStart}),b.$element.off({scroll:b._onElementScroll,touchstart:b._onElementTouchStart}),a(c).off({mouseup:b._onDocumentMouseUp,mousemove:b._onDocumentMouseMove,touchend:b._onDocumentTouchEnd,touchmove:b._onDocumentTouchMove})}(this)},_onWheel:function(a){a.preventDefault(),this.scroll(-a.deltaY*this.options.wheelSensitivity)},_onBarMouseDown:function(a){1===a.which&&(a.preventDefault(),this._dragStart(a.pageY))},_onDocumentMouseMove:function(a){this._isBarCaptured&&(a.preventDefault(),this._drag(a.pageY))},_onDocumentMouseUp:function(a){this._isBarCaptured&&1===a.which&&(a.preventDefault(),this._dragStop())},_onBarTouchStart:function(a){var b=a.originalEvent.targetTouches;1==b.length&&(a.preventDefault(),this._barTouchId=b[0].identifier,this._dragStart(b[0].pageY))},_onDocumentTouchMove:function(a){var b,c=a.originalEvent.targetTouches;if(this._isBarCaptured)for(b in c)if(c[b].identifier===this._barTouchId){a.preventDefault(),this._drag(c[b].pageY);break}if(null!==this._elementTouchId)for(b in c)if(c[b].identifier===this._elementTouchId){a.preventDefault(),this._swipe(c[b].pageY);break}},_onDocumentTouchEnd:function(a){var b,c,d,e,f,g=a.originalEvent.changedTouches;if(this._isBarCaptured)for(f in g)if(g[f].identifier===this._barTouchId){a.preventDefault(),this._dragStop(),this._barTouchId=null;break}if(null!==this._elementTouchId)for(f in g)if(g[f].identifier===this._elementTouchId){b=Date.now()-this._swipeStartedAt,b<=this.options.momentum.thresholdTime&&(c=this._swipeStartY-g[f].pageY,d=Math.abs(c/b),e=d*d*2*this.options.momentum.acceleration,0>c&&(e=-e),this.scroll(e,{duration:d*this.options.momentum.acceleration,easing:"momentum"})),this._swipeStartY=this._swipeStartedAt=this._elementTouchId=null;break}},_onElementScroll:function(a){a.preventDefault(),this._updateBarPosition()},_onElementTouchStart:function(a){var b=a.originalEvent.targetTouches;1==b.length&&(this.$element.is(":animated")&&(this.$element.stop(!0,!1),this._setScrolledToY(this.$element.scrollTop())),this._elementTouchId=b[0].identifier,this._swipeStartY=this._prevY=b[0].pageY,this._swipeStartedAt=new Date)},_dragStart:function(a){this._isBarCaptured=!0,this._prevY=a,this.$bar.addClass(e+"-bar-captured")},_drag:function(a){var b=this.$element.outerHeight();this.scroll((a-this._prevY)*((this._getScrollHeight()-b)/(b-this.$bar.height()))),this._prevY=a},_dragStop:function(){this._isBarCaptured=!1,this.$bar.removeClass(e+"-bar-captured")},_swipe:function(a){this.scroll(this._prevY-a),this._prevY=a},scroll:function(b,c){var f,g=this._getScrollHeight()-this.$element.outerHeight(),h=this._getScrolledToY()+b,i=this.options;this.$element.trigger("scroll."+e).stop(!0,!1),h>=g?h=g:0>=h&&(h=0),this._setScrolledToY(h),d===c?this.$element.scrollTop(h):this.$element.animate({scrollTop:h},c),!this._isReachTriggered.bottom&&h+i.distanceToReach>=g?f="bottom":!this._isReachTriggered.top&&h-i.distanceToReach<=0&&(f="top"),f&&(this.$element.trigger(a.Event("reach."+e,{position:f})),this._isReachTriggered[f]=!0)},jump:function(a,b){"top"===a?a=0:"bottom"===a&&(a=this._getScrollHeight()-this.$element.height()),this.scroll(a-this._getScrolledToY(),b)},update:function(){var a=this._isShown;this._scrollHeight=d,this._isReachTriggered.top=this._isReachTriggered.bottom=!1,this._updateBarHeight(),this._isShown&&(this._updateBarPosition(),a||this.addListeners())},_getScrolledToY:function(){return d===this._scrolledToY&&(this._scrolledToY=this.$element.scrollTop()),this._scrolledToY},_setScrolledToY:function(a){this._scrolledToY=a},_getScrollHeight:function(){return d===this._scrollHeight&&(this._scrollHeight=this.$element[0].scrollHeight),this._scrollHeight},_updateBarHeight:function(){var a=this.$element.outerHeight(),b=a/this._getScrollHeight();1!==b?(this.$bar.height(a*b),this._isShown||(this.$bar.addClass(e+"-bar-in"),this.$rail.addClass(e+"-rail-in"),this._isShown=!0)):this._isShown&&(this.removeListeners(),this.$bar.removeClass(e+"-bar-in"),this.$rail.removeClass(e+"-rail-in"),this._isShown=!1)},_updateBarPosition:function(){var a=this.$element.outerHeight();this.$bar.css("top",(a-this.$bar.outerHeight())*(this.$element.scrollTop()/(this._getScrollHeight()-a)))},destroy:function(){this.$wrapper.off("."+e).find("*").off("."+e),this.removeListeners(),this.$element.unwrap().removeData(e),this.$rail.remove(),this.$bar.remove(),this.$bar=this.$rail=this.$element=this.$wrapper=null}},a.easing.momentum===d&&(a.easing.momentum=function(a,b,c,d,e){var f=(b/=e)*b,g=f*b;return c+d*(-1*f*f+4*g+-6*f+4*b)}),a.fn[e]=function(b){var c=Array.prototype.slice.call(arguments,1);return this.each(function(){var d,g=a(this),h=g.data(e);"object"==typeof b&&(d=b),h||g.data(e,h=new f(g,d)),"string"==typeof b&&h[b].apply(h,c)})},a.fn[e].Constructor=f,a.fn[e].defaults={distanceToReach:0,wheelSensitivity:20,momentum:{acceleration:1600,thresholdTime:500},start:"top",templates:{bar:'<div class="'+e+'-bar"></div>',rail:'<div class="'+e+'-rail"></div>',wrapper:'<div class="'+e+'-wrapper"></div>'}}}(jQuery,window,document);
//# sourceMappingURL=scrollbox.min.js.map