/*!
 * Scrollbox v.2.0.0
 * (c) 2013-2016, Max Invis1ble
 * Licensed under MIT (https://opensource.org/licenses/mit-license.php)
 */
+function(a,b,c,d){"use strict";var e="scrollbox",f=function(b,c){var f=this.options=a.extend({},a.fn[e].defaults,c);this.$element=b,this.$rail=a(f.templates.rail),this.$bar=a(f.templates.bar),this.init=f.init||this.init,this.addListeners=f.addListeners||this.addListeners,this.removeListeners=f.removeListeners||this.removeListeners,this.scroll=f.scroll||this.scroll,this.jump=f.jump||this.jump,this.update=f.update||this.update,this.destroy=f.destroy||this.destroy,this._isOver=this._isBarCaptured=this._isShown=!1,this._prevY=0,this._isReachTriggered={top:!1,bottom:!1},this._scrollHeight=d,this._setScrolledToY(),this._barTouchId=this._elementTouchId=this._swipeStartY=this._swipeStartedAt=null,this._listeners={},this.init()};f.prototype={init:function(){var a=this.options;this.$wrapper=this.$element.trigger("init."+e).css("overflow","hidden").wrap(a.templates.wrapper).parent().append(this.$rail).append(this.$bar),this._updateBarHeight(),"top"!==a.start&&this.jump(a.start),this._isShown&&this.addListeners()},addListeners:function(){this._listeners.wheel=a.proxy(this._onWheel,this),this.$wrapper.on({mouseenter:a.proxy(this._onEnter,this),mouseleave:a.proxy(this._onLeave,this)}),b.addEventListener?(b.addEventListener("DOMMouseScroll",this._listeners.wheel,!1),b.addEventListener("mousewheel",this._listeners.wheel,!1)):c.attachEvent("onmousewheel",this._listeners.wheel),this.$bar.on({mousedown:a.proxy(this._onBarMouseDown,this),touchstart:a.proxy(this._onBarTouchStart,this)}),this.$element.on({scroll:a.proxy(this._onElementScroll,this),touchstart:a.proxy(this._onElementTouchStart,this)}),a(c).on({mouseup:a.proxy(this._onDocumentMouseUp,this),mousemove:a.proxy(this._onDocumentMouseMove,this),touchend:a.proxy(this._onDocumentTouchEnd,this),touchmove:a.proxy(this._onDocumentTouchMove,this)})},removeListeners:function(){this.$wrapper.off({mouseenter:this._onEnter,mouseleave:this._onLeave}),b.removeEventListener?(b.removeEventListener("DOMMouseScroll",this._listeners.wheel,!1),b.removeEventListener("mousewheel",this._listeners.wheel,!1)):c.detachEvent("onmousewheel",this._listeners.wheel),this.$bar.off({mousedown:this._onBarMouseDown,touchstart:this._onBarTouchStart}),this.$element.off({scroll:this._onElementScroll,touchstart:this._onElementTouchStart}),a(c).off({mouseup:this._onDocumentMouseUp,mousemove:this._onDocumentMouseMove,touchend:this._onDocumentTouchEnd,touchmove:this._onDocumentTouchMove})},_onEnter:function(a){a.preventDefault(),this._isOver=!0},_onLeave:function(a){a.preventDefault(),this._isOver=!1},_onWheel:function(a){this._isOver&&(d===a&&(a=b.event),a.preventDefault?a.preventDefault():a.returnValue=!1,this.scroll((a.detail?a.detail/3:-a.wheelDelta/120)*this.options.wheelSensitivity))},_onBarMouseDown:function(a){1===a.which&&(a.preventDefault(),this._dragStart(a.pageY))},_onDocumentMouseMove:function(a){this._isBarCaptured&&(a.preventDefault(),this._drag(a.pageY))},_onDocumentMouseUp:function(a){this._isBarCaptured&&1===a.which&&(a.preventDefault(),this._dragStop())},_onBarTouchStart:function(a){var b=a.originalEvent.targetTouches;1==b.length&&(a.preventDefault(),this._barTouchId=b[0].identifier,this._dragStart(b[0].pageY))},_onDocumentTouchMove:function(a){var b,c=a.originalEvent.targetTouches;if(this._isBarCaptured)for(b in c)if(c[b].identifier===this._barTouchId){a.preventDefault(),this._drag(c[b].pageY);break}if(null!==this._elementTouchId)for(b in c)if(c[b].identifier===this._elementTouchId){a.preventDefault(),this._swipe(c[b].pageY);break}},_onDocumentTouchEnd:function(a){var b,c,d,e,f,g=a.originalEvent.changedTouches;if(this._isBarCaptured)for(f in g)if(g[f].identifier===this._barTouchId){a.preventDefault(),this._dragStop(),this._barTouchId=null;break}if(null!==this._elementTouchId)for(f in g)if(g[f].identifier===this._elementTouchId){a.preventDefault(),b=Date.now()-this._swipeStartedAt,b<=this.options.momentum.thresholdTime&&(c=this._swipeStartY-g[f].pageY,d=Math.abs(c/b),e=d*d*2*this.options.momentum.acceleration,0>c&&(e=-e),this.scroll(e,{duration:d*this.options.momentum.acceleration,easing:"momentum"})),this._swipeStartY=this._swipeStartedAt=this._elementTouchId=null;break}},_onElementScroll:function(a){a.preventDefault(),this._updateBarPosition()},_onElementTouchStart:function(a){var b=a.originalEvent.targetTouches;1==b.length&&(a.preventDefault(),this.$element.is(":animated")&&(this.$element.stop(!0,!1),this._setScrolledToY(this.$element.scrollTop())),this._elementTouchId=b[0].identifier,this._swipeStartY=this._prevY=b[0].pageY,this._swipeStartedAt=new Date)},_dragStart:function(a){this._isBarCaptured=!0,this._prevY=a,this.$bar.addClass(e+"-bar-captured")},_drag:function(a){var b=this.$element.outerHeight();this.scroll((a-this._prevY)*((this._getScrollHeight()-b)/(b-this.$bar.height()))),this._prevY=a},_dragStop:function(){this._isBarCaptured=!1,this.$bar.removeClass(e+"-bar-captured")},_swipe:function(a){this.scroll(this._prevY-a),this._prevY=a},scroll:function(b,c){var f,g=this._getScrollHeight()-this.$element.outerHeight(),h=this._getScrolledToY()+b,i=this.options;this.$element.trigger("scroll."+e).stop(!0,!1),h>=g?h=g:0>=h&&(h=0),this._setScrolledToY(h),d===c?this.$element.scrollTop(h):this.$element.animate({scrollTop:h},c),!this._isReachTriggered.bottom&&h+i.distanceToReach>=g?f="bottom":!this._isReachTriggered.top&&h-i.distanceToReach<=0&&(f="top"),f&&(this.$element.trigger(a.Event("reach."+e,{position:f})),this._isReachTriggered[f]=!0)},jump:function(a,b){"top"===a?a=0:"bottom"===a&&(a=this._getScrollHeight()-this.$element.height()),this.scroll(a-this._getScrolledToY(),b)},update:function(){var a=this._isShown;this._scrollHeight=d,this._isReachTriggered.top=this._isReachTriggered.bottom=!1,this._updateBarHeight(),this._isShown&&(this._updateBarPosition(),a||this.addListeners())},_getScrolledToY:function(){return d===this._scrolledToY&&(this._scrolledToY=this.$element.scrollTop()),this._scrolledToY},_setScrolledToY:function(a){this._scrolledToY=a},_getScrollHeight:function(){return d===this._scrollHeight&&(this._scrollHeight=this.$element[0].scrollHeight),this._scrollHeight},_updateBarHeight:function(){var a=this.$element.outerHeight(),b=a/this._getScrollHeight();1!==b?(this.$bar.height(a*b),this._isShown||(this.$bar.addClass(e+"-bar-in"),this.$rail.addClass(e+"-rail-in"),this._isShown=!0)):this._isShown&&(this.removeListeners(),this.$bar.removeClass(e+"-bar-in"),this.$rail.removeClass(e+"-rail-in"),this._isShown=!1)},_updateBarPosition:function(){var a=this.$element.outerHeight();this.$bar.css("top",(a-this.$bar.outerHeight())*(this.$element.scrollTop()/(this._getScrollHeight()-a)))},destroy:function(){this.$wrapper.off("."+e).find("*").off("."+e),this.removeListeners(),this.$element.unwrap().removeData(e),this.$rail.remove(),this.$bar.remove(),this.$bar=this.$rail=this.$element=this.$wrapper=null}},a.easing.momentum===d&&(a.easing.momentum=function(a,b,c,d,e){var f=(b/=e)*b,g=f*b;return c+d*(-1*f*f+4*g+-6*f+4*b)}),a.fn[e]=function(b){var c=Array.prototype.slice.call(arguments,1);return this.each(function(){var d,g=a(this),h=g.data(e);"object"==typeof b&&(d=b),h||g.data(e,h=new f(g,d)),"string"==typeof b&&h[b].apply(h,c)})},a.fn[e].Constructor=f,a.fn[e].defaults={distanceToReach:0,wheelSensitivity:20,momentum:{acceleration:1600,thresholdTime:500},start:"top",templates:{bar:'<div class="'+e+'-bar"></div>',rail:'<div class="'+e+'-rail"></div>',wrapper:'<div class="'+e+'-wrapper"></div>'}}}(jQuery,window,document);