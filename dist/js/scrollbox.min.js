/*!
 * Scrollbox v2.2.2
 * (c) 2013-2016, Max Invis1ble
 * Licensed under MIT (https://opensource.org/licenses/mit-license.php)
 */
+function(a,b,c,d){"use strict";var e="scrollbox",f=function(b,c){!function(c,e,f){c.options=e,c.$element=b,c.$rail=a(e.templates.rail),c.$bar=a(e.templates.bar),a.each(f,function(a,b){e[b]&&(c[b]=e[b])}),c._isBarCaptured=c._isShown=c._isCorrectionRequired=!1,c._prevY=0,c._isReachTriggered={top:!1,bottom:!1},c._scrollHeight=d,c._setScrolledToY(b.scrollTop()),c._barTouchId=c._elementTouchId=c._swipeStartY=c._swipeStartedAt=null,c.init()}(this,a.extend({},a.fn[e].defaults,c),["init","addListeners","removeListeners","scroll","jump","update","destroy"])};f.prototype={init:function(){!function(a,b){a.$wrapper=a.$element.trigger("init."+e).addClass("scrollbox-overflowed").wrap(b.templates.wrapper).parent().append(a.$rail).append(a.$bar),a._updateBarHeight(),a._isShown&&a.addListeners(),a.jump(b.start)}(this,this.options)},addListeners:function(){!function(b,d){b.$wrapper.on("mousewheel",d(b,"_onWheel")),b.$bar.on({mousedown:d(b,"_onBarMouseDown"),touchstart:d(b,"_onBarTouchStart")}),b.$element.on({scroll:d(b,"_onElementScroll"),touchstart:d(b,"_onElementTouchStart")}),a(c).on({mouseup:d(b,"_onDocumentMouseUp"),mousemove:d(b,"_onDocumentMouseMove"),touchend:d(b,"_onDocumentTouchEnd"),touchmove:d(b,"_onDocumentTouchMove")})}(this,a.proxy)},removeListeners:function(){!function(b){b.$wrapper.off("mousewheel",b._onWheel),b.$bar.off({mousedown:b._onBarMouseDown,touchstart:b._onBarTouchStart}),b.$element.off({scroll:b._onElementScroll,touchstart:b._onElementTouchStart}),a(c).off({mouseup:b._onDocumentMouseUp,mousemove:b._onDocumentMouseMove,touchend:b._onDocumentTouchEnd,touchmove:b._onDocumentTouchMove})}(this)},_onWheel:function(a){a.preventDefault(),this.scroll(-a.deltaY*this.options.wheelSensitivity)},_onBarMouseDown:function(a){1===a.which&&(a.preventDefault(),this._dragStart(a.pageY))},_onDocumentMouseMove:function(a){this._isBarCaptured&&(a.preventDefault(),this._drag(a.pageY))},_onDocumentMouseUp:function(a){this._isBarCaptured&&1===a.which&&(a.preventDefault(),this._dragStop())},_onBarTouchStart:function(a){var b=a.originalEvent.targetTouches;1==b.length&&(a.preventDefault(),this._barTouchId=b[0].identifier,this._dragStart(b[0].pageY))},_onDocumentTouchMove:function(b){var c=b.originalEvent.targetTouches;this._isBarCaptured&&a.each(c,a.proxy(function(a,c){return c.identifier===this._barTouchId?(b.preventDefault(),this._drag(c.pageY),!1):void 0},this)),null!==this._elementTouchId&&a.each(c,a.proxy(function(a,c){return c.identifier===this._elementTouchId?(b.preventDefault(),this._swipe(c.pageY),!1):void 0},this))},_onDocumentTouchEnd:function(b){var c,d,e,f,g=b.originalEvent.changedTouches;this._isBarCaptured&&a.each(g,a.proxy(function(a,c){return c.identifier===this._barTouchId?(b.preventDefault(),this._dragStop(),this._barTouchId=null,!1):void 0},this)),null!==this._elementTouchId&&a.each(g,a.proxy(function(a,b){return b.identifier===this._elementTouchId?(c=Date.now()-this._swipeStartedAt,c<=this.options.momentum.thresholdTime&&(d=this._swipeStartY-b.pageY,e=Math.abs(d/c),f=e*e*2*this.options.momentum.acceleration,0>d&&(f=-f),this.scroll(f,{duration:e*this.options.momentum.acceleration,easing:"momentum"})),this._swipeStartY=this._swipeStartedAt=this._elementTouchId=null,!1):void 0},this))},_onElementScroll:function(a){a.preventDefault(),this._isCorrectionRequired?this._isCorrectionRequired=!1:this._setScrolledToY(this.$element.scrollTop()),this._updateBarPosition(),this._checkIsReached()},_onElementTouchStart:function(a){var b=a.originalEvent.targetTouches;1==b.length&&(this.$element.is(":animated")&&this.$element.stop(!0,!1),this._elementTouchId=b[0].identifier,this._swipeStartY=this._prevY=b[0].pageY,this._swipeStartedAt=Date.now())},_dragStart:function(a){this._isBarCaptured=!0,this._prevY=a,this.$bar.addClass(e+"-bar-captured")},_drag:function(a){var b=this.$element.outerHeight();this.scroll((a-this._prevY)*((this._getScrollHeight()-b)/(b-this.$bar.height()))),this._prevY=a},_dragStop:function(){this._isBarCaptured=!1,this.$bar.removeClass(e+"-bar-captured")},_swipe:function(a){this.scroll(this._prevY-a),this._prevY=a},scroll:function(b,c){var f,g=this._getScrollHeight()-this.$element.outerHeight(),h=this._getScrolledToY()+b;this.$element.trigger("scroll."+e).stop(!0,!1),0===b?this._checkIsReached():(f=h>=g?g:0>=h?0:h,d===c?(this._isCorrectionRequired=!0,this.$element.scrollTop(f),this._setScrolledToY(f)):(c.progress=a.proxy(function(a){f!==h&&f===this._getScrolledToY()&&a.stop()},this),this.$element.animate({scrollTop:h},c)))},jump:function(a,b){"top"===a?a=0:"bottom"===a&&(a=this._getScrollHeight()-this.$element.height()),this.scroll(a-this._getScrolledToY(),b)},update:function(){var a=this._isShown;this._scrollHeight=d,this._isReachTriggered.top=this._isReachTriggered.bottom=!1,this._updateBarHeight(),this._isShown&&(this._updateBarPosition(),a||this.addListeners())},_getScrolledToY:function(){return this._scrolledToY},_setScrolledToY:function(a){this._scrolledToY=a},_getScrollHeight:function(){return d===this._scrollHeight&&(this._scrollHeight=this.$element[0].scrollHeight),this._scrollHeight},_updateBarHeight:function(){var a=this.$element.outerHeight(),b=a/this._getScrollHeight();1!==b?(this.$bar.height(a*b),this._isShown||(this.$bar.addClass(e+"-bar-in"),this.$rail.addClass(e+"-rail-in"),this._isShown=!0)):this._isShown&&(this.removeListeners(),this.$bar.removeClass(e+"-bar-in"),this.$rail.removeClass(e+"-rail-in"),this._isShown=!1)},_updateBarPosition:function(){var a=this.$element.outerHeight();this.$bar.css("top",(a-this.$bar.outerHeight())*(this.$element.scrollTop()/(this._getScrollHeight()-a)))},_checkIsReached:function(){var b,c=this.$element.scrollTop();!this._isReachTriggered.bottom&&c+this.options.distanceToReach>=this._getScrollHeight()-this.$element.outerHeight()?b="bottom":!this._isReachTriggered.top&&c-this.options.distanceToReach<=0&&(b="top"),b&&(this.$element.trigger(a.Event("reach."+e,{position:b})),this._isReachTriggered[b]=!0)},destroy:function(){this.removeListeners(),this.$element.removeClass("scrollbox-overflowed").unwrap().removeData(e),this.$rail.remove(),this.$bar.remove(),this.$bar=this.$rail=this.$element=this.$wrapper=null}},d===a.easing.momentum&&(a.easing.momentum=function(a,b,c,d,e){return b==e?c+d:d*(-Math.pow(2,-10*b/e)+1)+c}),a.fn[e]=function(b){var c=Array.prototype.slice.call(arguments,1);return this.each(function(){var d,g=a(this),h=g.data(e);"object"==typeof b&&(d=b),h||g.data(e,h=new f(g,d)),"string"==typeof b&&h[b].apply(h,c)})},a.fn[e].Constructor=f,a.fn[e].defaults={distanceToReach:0,wheelSensitivity:20,momentum:{acceleration:1600,thresholdTime:500},start:"top",templates:{bar:'<div class="'+e+'-bar"></div>',rail:'<div class="'+e+'-rail"></div>',wrapper:'<div class="'+e+'-wrapper"></div>'}}}(jQuery,window,document);
//# sourceMappingURL=scrollbox.min.js.map